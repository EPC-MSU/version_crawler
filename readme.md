# Version crawler

Crawl.py - скрипт для поиска неправильно именованных релизов (см. Правила именования в релизах зрелых продуктов: https://ximc.ru/projects/office/wiki/Правила_именования_выходных_файлов )

# Запуск

```
python Crawl.py
```
В окне Default path прописывается путь к папке, в которой ищутся неправильно именованные файлы
В окнах Correct regexp и Bad regexp соотвественно прописываются корректные и некорректные правила именования релиза.
Например, по умолчанию хорошее правило записано как: 
```
^([a-z_\d])+-(\d{1,2}\.\d{1,2}\.\d{1,2})(\.[a-z\d]{1,4})?(-[a-z_\d]+(\.([\d]+|x))?(\.([\d]+|x))?)?(-\([a-z_\d]+\))?(\.(zip|7z|tar\.gz|cod|json|txt|exe|sh|rpm|jar|swu|img|bin|deb|pdf))$
```
что означает, что к правильным символам относятся символы латинского алфавита. Тогда, чтобы добавить к списку правильных имен имена с символами русского алфавита, нужно переделать правило таким образом:
```
^([a-zа-я_\d])+-(\d{1,2}\.\d{1,2}\.\d{1,2})(\.[a-zа-я\d]{1,4})?(-[a-zа-я_\d]+(\.([\d]+|x))?(\.([\d]+|x))?)?(-\([a-zа-я_\d]+\))?(\.(zip|7z|tar\.gz|cod|json|txt|exe|sh|rpm|jar|swu|img|bin|deb|pdf))$
```
После этого необходимо нажать кнопку "Save config" и нажать "Start crawl".
В итоге в файлах Crawl_results_bad.txt и Crawl_results_good.txt появятся названия плохо и хорошо именованных релизов соответственно.

# Выпуск бинарных релизов

## Для Windows

Чтобы создать исполняемый exe-файл, нужно запустить скрипт `release.bat`. Файл `Crawl.exe` будет находиться в папке `release`. Туда же будут помещены файлы `default.ini` и `readme.md`.

## Для Linux

Если операционная система не настроена, то нужно выполнить:

```bash
sudo apt install git
git clone https://github.com/EPC-MSU/version_crawler.git
cd version_crawler/
sudo apt install python3-tk python3-venv python3-dev python3-pip
pip install eggs
```

Чтобы создать исполняемый бинарный файл, в терминале нужно выполнить команду:

`source release.sh`

Бинарный файл `Crawl` будет находиться в папке `release`. Туда же будут помещены файлы `default.ini` и `readme.md`.